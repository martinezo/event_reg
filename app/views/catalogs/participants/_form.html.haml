.error-explanation

%h1= "#{t('titles.participant')} (#{@catalogs_participant.course.name})"

= simple_form_for @catalogs_participant, url: url, :html => {:novalidate => true, multipart: true} do |f|

  .command.t-right
    .c-command{style: "background-color: #{@color_theme1}"}= link_to_jq_button({url: catalogs_participants_list_path(@catalogs_participant.course), text: t('commands.cancel'), icon: 'close', remote: false})
    .c-command{style: "background-color: #{@color_theme1}"}=jq_submit_tag t('commands.save')
  .sp


  %h3.t-head{style: "background-color: #{@color_theme3};"}= t('titles.event_general_data')
  .tbl-participants-attr
    .col-1
      =f.hidden_field :course_id
      =f.label :name
    .col-2
      =f.input_field :name, :size => 70
    .col-1
      =f.label :surnames
    .col-2
      =f.input_field :surnames, :size => 70
    .col-1
      =f.label :mail
    .col-2
      =f.input_field :mail, :size => 70
    .col-1
      =f.label :phone_numbers
    .col-2
      =f.input_field :phone_numbers, :size => 70
    .col-1
      =f.label :workplace
    .col-2
      =f.input_field :workplace, :size => 70

    - prices = {}
    - prices.merge!("#{@catalogs_participant.course.price1_desc} ($ #{'%.2f' % @catalogs_participant.course.price1})" => 1) unless @catalogs_participant.course.price1_desc.try(:empty?)
    - prices.merge!("#{@catalogs_participant.course.price2_desc} ($ #{'%.2f' % @catalogs_participant.course.price2})" => 2) unless @catalogs_participant.course.price2_desc.try(:empty?)
    - prices.merge!("#{@catalogs_participant.course.price3_desc} ($ #{'%.2f' % @catalogs_participant.course.price3})" => 3) unless @catalogs_participant.course.price3_desc.try(:empty?)
    - if prices.size > 0
      .col-1
        = f.label :participant_type
      .col-2.prices
        =f.input_field :price, collection: prices, as: :radio_buttons

  - if @catalogs_participant.course.academic_data_required?
    %h3.t-head{style: "background-color: #{@color_theme3};"}= t('titles.academic_data')
    .tbl-participants-attr
      .col-1
        =f.label :bachelor_deg
      .col-2
        =f.input_field :bachelor_deg, :size => 70
      .col-1
        =f.label :master_deg
      .col-2
        =f.input_field :master_deg, :size => 70
      .col-1
        =f.label :phd_deg
      .col-2
        =f.input_field :phd_deg, :size => 70

  - if !(@catalogs_participant.course.price1_desc+@catalogs_participant.course.price2_desc+@catalogs_participant.course.price3_desc).strip.empty?
    %h3.t-head{style: "background-color: #{@color_theme3};"}= t('titles.invoice_data')
    .tbl-participants-attr
      .col-1
        =f.label :invoice_required
      .col-2
        =f.input_field :invoice_required, as: :boolean
      .col-1
        =f.label :inv_name
      .col-2
        =f.input_field :inv_name, :size => 70
      .col-1
        =f.label :inv_rfc
      .col-2
        =f.input_field :inv_rfc, :size => 70
      .col-1
        =f.label :inv_address
      .col-2
        =f.input_field :inv_address, :size => 70
      .col-1
        =f.label :inv_city
      .col-2
        =f.input_field :inv_city, :size => 70
      .col-1
        =f.label :inv_municipality
      .col-2
        =f.input_field :inv_municipality, :size => 70
      .col-1
        =f.label :inv_state
      .col-2
        =f.input_field :inv_state, :size => 70
      .col-1
        =f.label :inv_mail
      .col-2
        =f.input_field :inv_mail, :size => 70

  %h3.t-head{style: "background-color: #{@color_theme3};"}= t('titles.additional_data')
  .tbl-participants-attr
    -if !@catalogs_participant.course.opt_text.empty?
      .col-1
        =@catalogs_participant.course.opt_text
      .col-2
        =f.input_field :opt_text, size: "69x5"
    -if !@catalogs_participant.course.opt_str1.empty?
      .col-1
        =@catalogs_participant.course.opt_str1
      .col-2
        =f.input_field :opt_str1, :size => 70
    -if !@catalogs_participant.course.opt_str2.empty?
      .col-1
        =@catalogs_participant.course.opt_str2
      .col-2
        =f.input_field :opt_str2, :size => 70
    -if !@catalogs_participant.course.opt_bol1.empty?
      .col-1
        =@catalogs_participant.course.opt_bol1
      .col-2
        =f.input_field :opt_bol1, as: :boolean
    -if !@catalogs_participant.course.opt_bol2.empty?
      .col-1
        =@catalogs_participant.course.opt_bol2
      .col-2
        =f.input_field :opt_bol2, as: :boolean
    -if !@catalogs_participant.course.opt_sel.empty?
      - list = @catalogs_participant.course.opt_sel_options.split(",")
      .col-1
        =@catalogs_participant.course.opt_sel
      .col-2
        =f.select :opt_sel, list
  %hr{style: "color: #{@color_theme1}"}
  .command.t-right
    .c-command{style: "background-color: #{@color_theme1}"}= link_to_jq_button({url: catalogs_participants_list_path(@catalogs_participant.course), text: t('commands.cancel'), icon: 'close', remote: false})
    .c-command{style: "background-color: #{@color_theme1}"}=jq_submit_tag t('commands.save')
  %br
